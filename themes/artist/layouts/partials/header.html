<header>
  <div class="container">
    <nav class="navbar" id="navbar-main">
      <a class="navbar-brand" href="{{ "/" | relLangURL }}">
        {{- if .Site.Params.logo -}}
        <img class="logo" id="logo" src="{{ printf .Site.Params.logo | relURL }}" alt="{{ .Site.Title }}">
        {{- else -}}
        {{- .Site.Title -}}
        {{- end -}}
      </a>
      <div class="collapse navbar-collapse" id="navbar">
        {{ $align_right := .Site.Params.menus.align_right | default true }}
        <ul class="navbar-nav {{ if $align_right }}ml-auto{{ else }}mr-auto{{ end }}">
          {{ range .Site.Menus.main }}
          {{ if .HasChildren }}
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
              {{ .Pre }}
              <span>{{ .Name | safeHTML }}</span>
              {{ .Post }}
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              {{ range .Children }}
              <li class="dropdown-item my-0 py-0 mx-0 px-0">
                <a href="{{ .URL | relLangURL }}" {{ if $.IsHome }} data-target="{{ .URL }}" {{ end }}>
                  {{ .Pre }}
                  <span>{{ .Name | safeHTML }}</span>
                  {{ .Post }}
                </a>
              </li>
              {{ end }}
            </ul>
          </li>
          {{ else }}
          {{ $.Scratch.Set "target" "" }}
          {{ if gt (len .URL) 4 }}
          {{ if eq "http" (slicestr .URL 0 4) }}
          {{ $.Scratch.Set "target" " target=\"_blank\" rel=\"noopener\"" }}
          {{ end }}
          {{ end }}
          <li class="nav-item">
            <a class="nav-link" href="{{ .URL | relLangURL }}" {{ if $.IsHome }} data-target="{{ .URL }}" {{ end }}
              {{ ($.Scratch.Get "target") | safeHTMLAttr }}>
              {{ .Pre }}
              <span>{{ .Name | safeHTML }}</span>
              {{ .Post }}
            </a>
          </li>
          {{ end }}
          {{ end }}
          {{ if and (not $align_right) (or .IsTranslated .Site.Menus.main_right) }}
        </ul>
        <ul class="navbar-nav ml-auto">
          {{ end }}
          {{ range .Site.Menus.main_right }}
          {{/* Set target for link. */}}
          {{ $.Scratch.Set "target" "" }}
          {{ if gt (len .URL) 4 }}
          {{ if eq "http" (slicestr .URL 0 4) }}
          {{ $.Scratch.Set "target" " target=\"_blank\" rel=\"noopener\"" }}
          {{ end }}
          {{ end }}
          <li class="nav-item">
            <a class="nav-link" href="{{ .URL | relLangURL }}" {{ if $.IsHome }} data-target="{{ .URL }}" {{ end }}
              {{ ($.Scratch.Get "target") | safeHTMLAttr }}>
              {{ .Pre }}
              <span>{{ .Name | safeHTML }}</span>
              {{ .Post }}
            </a>
          </li>
          {{ end }}
          {{ if .Site.Params.search.engine }}
          <li class="nav-item">
            <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
          </li>
          {{ end }}
        </ul>
      </div>
    </nav>
  </div>
</header>